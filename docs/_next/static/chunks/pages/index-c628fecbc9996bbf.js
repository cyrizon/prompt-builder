(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{4209:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>_});var r=n(7876),a=n(4232),s=n(1541),l=n(708),i=n(9241),o=n(9573);function d(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,o.QP)((0,i.$)(t))}let c=s.bL;s.l9;let u=s.ZL;s.bm;let m=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.hJ,{ref:t,className:d("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",n),...a})});m.displayName=s.hJ.displayName;let h=a.forwardRef((e,t)=>{let{className:n,children:a,hideCloseButton:i=!1,...o}=e;return(0,r.jsxs)(u,{children:[(0,r.jsx)(m,{className:i?"bg-transparent":void 0}),(0,r.jsxs)(s.UC,{ref:t,className:d("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 sm:rounded-lg",n),...o,children:[a,!i&&(0,r.jsxs)(s.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(l.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});h.displayName=s.UC.displayName;let x=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:d("flex flex-col space-y-1.5 text-center sm:text-left",t),...n})};x.displayName="DialogHeader";let p=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.hE,{ref:t,className:d("text-lg font-semibold leading-none tracking-tight",n),...a})});function g(e){let{className:t,type:n,...a}=e;return(0,r.jsx)("input",{type:n,"data-slot":"input",className:d("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...a})}function f(e){let{open:t,onOpenChange:n,onInsertTag:s}=e,[l,i]=(0,a.useState)(""),o=(0,a.useRef)(null);return(0,a.useEffect)(()=>{t&&(setTimeout(()=>{var e;return null==(e=o.current)?void 0:e.focus()},0),i(""))},[t]),(0,r.jsx)(c,{open:t,onOpenChange:n,children:(0,r.jsxs)(h,{className:"sm:max-w-md p-4 border-0 shadow-2xl bg-background",hideCloseButton:!0,"aria-describedby":void 0,children:[(0,r.jsx)(p,{className:"sr-only",children:"Tag name"}),(0,r.jsx)("form",{onSubmit:e=>{e.preventDefault(),l.trim()&&(s(l.trim()),i(""),n(!1))},children:(0,r.jsx)(g,{ref:o,type:"text",placeholder:"Tag name...",value:l,onChange:e=>i(e.target.value),onKeyDown:e=>{"Escape"===e.key&&n(!1)}})})]})})}function b(e){let{className:t,...n}=e;return(0,r.jsx)("textarea",{"data-slot":"textarea",className:d("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...n})}function v(e){let{open:t,onOpenChange:n,onInsertContent:s}=e,[l,i]=(0,a.useState)(""),o=(0,a.useRef)(null);return(0,a.useEffect)(()=>{t&&(setTimeout(()=>{var e;return null==(e=o.current)?void 0:e.focus()},0),i(""))},[t]),(0,r.jsx)(c,{open:t,onOpenChange:n,children:(0,r.jsxs)(h,{className:"sm:max-w-2xl p-4 border-0 shadow-2xl bg-background",hideCloseButton:!0,"aria-describedby":void 0,children:[(0,r.jsx)(p,{className:"sr-only",children:"Tag content"}),(0,r.jsx)("form",{onSubmit:e=>{e.preventDefault(),l.trim()&&(s(l.trim()),i(""))},children:(0,r.jsx)(b,{ref:o,placeholder:"Tag content... (Ctrl+Enter to submit)",value:l,onChange:e=>i(e.target.value),onKeyDown:e=>{"Escape"===e.key&&n(!1),(e.ctrlKey||e.metaKey)&&"Enter"===e.key&&(e.preventDefault(),l.trim()&&(s(l.trim()),i("")))},className:"min-h-[200px] resize-none",rows:10})})]})})}function j(e){let{open:t,onOpenChange:n,node:s,onSave:l}=e,[i,o]=(0,a.useState)(""),[d,u]=(0,a.useState)(""),m=(0,a.useRef)(null),x=(0,a.useRef)(null);(0,a.useEffect)(()=>{t&&s?"tag"===s.type?(o(s.tagName||""),u(s.content||""),setTimeout(()=>{var e;return null==(e=m.current)?void 0:e.focus()},0)):(u(s.content||""),setTimeout(()=>{var e;return null==(e=x.current)?void 0:e.focus()},0)):t||(o(""),u(""))},[t,s]);let f=e=>{e.preventDefault(),s&&("tag"===s.type?i.trim()&&(l({...s,tagName:i.trim(),content:d.trim()||void 0}),n(!1)):d.trim()&&(l({...s,content:d.trim()}),n(!1)))};return s?"tag"===s.type?(0,r.jsx)(c,{open:t,onOpenChange:n,children:(0,r.jsxs)(h,{className:"sm:max-w-md p-4 border-0 shadow-2xl bg-background",hideCloseButton:!0,"aria-describedby":void 0,children:[(0,r.jsx)(p,{className:"sr-only",children:"Edit tag"}),(0,r.jsxs)("form",{onSubmit:f,className:"space-y-3",children:[(0,r.jsx)(g,{ref:m,type:"text",placeholder:"Tag name...",value:i,onChange:e=>o(e.target.value),onKeyDown:e=>{if("Escape"===e.key)n(!1);else if("Enter"===e.key){var t,r;e.preventDefault(),null==(t=x.current)||t.focus(),null==(r=x.current)||r.focus()}}}),(0,r.jsx)(b,{ref:x,placeholder:"Content (optional)... (Ctrl+Enter to submit)",value:d,onChange:e=>u(e.target.value),onKeyDown:e=>{"Escape"===e.key?n(!1):(e.ctrlKey||e.metaKey)&&"Enter"===e.key&&f(e)},className:"min-h-[100px]",rows:5})]})]})}):(0,r.jsx)(c,{open:t,onOpenChange:n,children:(0,r.jsxs)(h,{className:"sm:max-w-2xl p-4 border-0 shadow-2xl bg-background",hideCloseButton:!0,"aria-describedby":void 0,children:[(0,r.jsx)(p,{className:"sr-only",children:"Edit content"}),(0,r.jsx)("form",{onSubmit:f,children:(0,r.jsx)(b,{ref:x,placeholder:"Content... (Ctrl+Enter to submit)",value:d,onChange:e=>u(e.target.value),onKeyDown:e=>{"Escape"===e.key?n(!1):(e.ctrlKey||e.metaKey)&&"Enter"===e.key&&f(e)},className:"min-h-[200px] resize-none",rows:10})})]})}):null}p.displayName=s.hE.displayName,a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.VY,{ref:t,className:d("text-sm text-muted-foreground",n),...a})}).displayName=s.VY.displayName;let y=e=>{let{open:t,onOpenChange:n}=e;return(0,r.jsx)(c,{open:t,onOpenChange:n,children:(0,r.jsxs)(h,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",hideCloseButton:!0,children:[(0,r.jsx)(x,{children:(0,r.jsx)(p,{className:"text-center",children:"Keyboard Shortcuts"})}),(0,r.jsxs)("div",{className:"space-y-6 py-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Creation"}),(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{children:"Create a new tag"}),(0,r.jsx)("kbd",{className:"px-3 py-1.5 bg-accent rounded font-mono text-sm",children:"C"})]})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Navigation"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{children:"Navigate up"}),(0,r.jsx)("kbd",{className:"px-3 py-1.5 bg-accent rounded font-mono text-sm",children:"↑"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{children:"Navigate down"}),(0,r.jsx)("kbd",{className:"px-3 py-1.5 bg-accent rounded font-mono text-sm",children:"↓"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Editing"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{children:"Edit selected element"}),(0,r.jsx)("kbd",{className:"px-3 py-1.5 bg-accent rounded font-mono text-sm",children:"E"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{children:"Delete selected element"}),(0,r.jsx)("kbd",{className:"px-3 py-1.5 bg-accent rounded font-mono text-sm",children:"Del"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Move"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{children:"Move up"}),(0,r.jsx)("kbd",{className:"px-3 py-1.5 bg-accent rounded font-mono text-sm",children:"Alt + ↑"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{children:"Move down"}),(0,r.jsx)("kbd",{className:"px-3 py-1.5 bg-accent rounded font-mono text-sm",children:"Alt + ↓"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Indentation"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{children:"Indent (become child of previous element)"}),(0,r.jsx)("kbd",{className:"px-3 py-1.5 bg-accent rounded font-mono text-sm",children:"Tab"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{children:"Unindent (move up to parent level)"}),(0,r.jsx)("kbd",{className:"px-3 py-1.5 bg-accent rounded font-mono text-sm",children:"Shift + Tab"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Help"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{children:"Show this help"}),(0,r.jsx)("kbd",{className:"px-3 py-1.5 bg-accent rounded font-mono text-sm",children:"H"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{children:"Close dialogs"}),(0,r.jsx)("kbd",{className:"px-3 py-1.5 bg-accent rounded font-mono text-sm",children:"Esc"})]})]})]})]})]})})};function N(e){let{className:t,...n}=e;return(0,r.jsx)("div",{"data-slot":"card",className:d("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...n})}function w(e){let{nodes:t,selectedNodeId:n,onSelectNode:a}=e,s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=n===e.id,i="".concat(1.5*t,"rem");return"content"===e.type?(0,r.jsx)("div",{onClick:()=>a(e.id),className:"\n            px-4 py-2 cursor-not-allowed transition-colors opacity-70\n            ".concat(l?"bg-muted border-l-2 border-muted-foreground":"hover:bg-muted/50","\n          "),style:{paddingLeft:i},title:"Content nodes cannot have children",children:(0,r.jsx)("span",{className:"text-muted-foreground italic",children:e.content||"(empty content)"})},e.id):(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{onClick:()=>a(e.id),className:"\n            px-4 py-2 cursor-pointer transition-colors\n            ".concat(l?"bg-primary/10 border-l-2 border-primary":"hover:bg-accent/50","\n          "),style:{paddingLeft:i},children:[(0,r.jsxs)("span",{className:"text-blue-600 dark:text-blue-400",children:["<",e.tagName,">"]}),e.content&&(0,r.jsx)("span",{className:"text-foreground ml-1",children:e.content}),e.content&&(0,r.jsxs)("span",{className:"text-blue-600 dark:text-blue-400 ml-1",children:["</",e.tagName,">"]})]}),e.children&&e.children.length>0&&(0,r.jsx)("div",{children:e.children.map(e=>s(e,t+1))}),!e.content&&(0,r.jsx)("div",{className:"px-4 py-1",style:{paddingLeft:i},children:(0,r.jsxs)("span",{className:"text-blue-600 dark:text-blue-400",children:["</",e.tagName,">"]})})]},e.id)};return(0,r.jsx)(N,{className:"h-full overflow-auto",children:(0,r.jsx)("div",{className:"p-2",children:0===t.length?(0,r.jsxs)("div",{className:"text-center text-muted-foreground py-8",children:[(0,r.jsx)("p",{children:"No elements"}),(0,r.jsxs)("p",{className:"text-sm mt-2",children:["Press ",(0,r.jsx)("kbd",{className:"px-2 py-1 bg-accent rounded",children:"C"})," to create a tag"]})]}):t.map(e=>s(e,0))})})}var k=n(5345),C=n.n(k),E=n(2987);let D=(0,n(7137).F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function A(e){let{className:t,variant:n,size:a,asChild:s=!1,...l}=e,i=s?E.DX:"button";return(0,r.jsx)(i,{"data-slot":"button",className:d(D({variant:n,size:a,className:t})),...l})}let S=[{name:"ChatGPT",url:"https://chat.openai.com/",logo:"/ai-logos/chatgpt.svg",color:"hover:bg-green-50 dark:hover:bg-green-950"},{name:"Claude",url:"https://claude.ai/new",logo:"/ai-logos/claude.svg",color:"hover:bg-orange-50 dark:hover:bg-orange-950"},{name:"Gemini",url:"https://gemini.google.com/app",logo:"/ai-logos/gemini.svg",color:"hover:bg-blue-50 dark:hover:bg-blue-950"},{name:"Mistral",url:"https://chat.mistral.ai/chat",logo:"/ai-logos/mistral.svg",color:"hover:bg-purple-50 dark:hover:bg-purple-950"},{name:"Perplexity",url:"https://www.perplexity.ai/",logo:"/ai-logos/perplexity.svg",color:"hover:bg-teal-50 dark:hover:bg-teal-950"},{name:"DeepSeek",url:"https://chat.deepseek.com/",logo:"/ai-logos/deepseek.svg",color:"hover:bg-indigo-50 dark:hover:bg-indigo-950"},{name:"HuggingChat",url:"https://huggingface.co/chat/",logo:"/ai-logos/huggingchat.svg",color:"hover:bg-yellow-50 dark:hover:bg-yellow-950"},{name:"Microsoft Copilot",url:"https://copilot.microsoft.com/",logo:"/ai-logos/copilot.svg",color:"hover:bg-cyan-50 dark:hover:bg-cyan-950"}],T=e=>{let{nodes:t}=e,[n,s]=(0,a.useState)(!1),[l,i]=(0,a.useState)(!1),o=(e=>{let t=e=>e.map(e=>{if("content"===e.type)return e.content||"";if("tag"===e.type){let n=e.tagName||"tag",r=e.children&&e.children.length>0,a=e.content&&""!==e.content.trim();if(!r&&!a)return"<".concat(n," />");let s="";return a&&(s+=e.content),r&&(s+=t(e.children)),"<".concat(n,">").concat(s,"</").concat(n,">")}return""}).join(""),n=t(e);try{return C()(n,{indentation:"  ",collapseContent:!0,lineSeparator:"\n"})}catch(e){return console.error("Error formatting XML:",e),n}})(t),d=async()=>{try{await navigator.clipboard.writeText(o),s(!0),setTimeout(()=>s(!1),2e3)}catch(e){console.error("Failed to copy:",e)}},u=async e=>{await navigator.clipboard.writeText(o),window.open(e,"_blank"),i(!1)};return(0,r.jsxs)("div",{className:"h-full flex flex-col",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"XML Preview"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(A,{onClick:d,variant:"outline",size:"sm",children:n?"✓ Copied":"Copy"}),(0,r.jsx)(A,{onClick:()=>i(!0),variant:"outline",size:"sm",children:"Send to AI"})]})]}),(0,r.jsx)(N,{className:"flex-1 overflow-auto",children:(0,r.jsx)("pre",{className:"p-4 text-sm font-mono whitespace-pre",children:(0,r.jsx)("code",{children:o})})}),(0,r.jsx)(c,{open:l,onOpenChange:i,children:(0,r.jsxs)(h,{className:"sm:max-w-md","aria-describedby":void 0,children:[(0,r.jsx)(x,{children:(0,r.jsx)(p,{className:"text-center",children:"Choose an AI"})}),(0,r.jsx)("div",{className:"grid grid-cols-3 gap-4 py-4",children:S.map(e=>(0,r.jsxs)("button",{onClick:()=>u(e.url),className:"flex flex-col items-center gap-2 p-4 rounded-lg border-2 border-transparent transition-all ".concat(e.color," hover:border-primary"),children:[(0,r.jsx)("div",{className:"text-foreground",children:(0,r.jsx)("img",{src:e.logo,alt:e.name,className:"w-8 h-8"})}),(0,r.jsx)("span",{className:"text-sm font-medium",children:e.name})]},e.name))}),(0,r.jsx)("p",{className:"text-xs text-center text-muted-foreground",children:"The prompt will be copied to your clipboard"})]})})]})};var z=n(2691);let _=()=>{let[e,t]=(0,a.useState)(!1),[n,s]=(0,a.useState)(!1),[l,i]=(0,a.useState)(!1),[o,d]=(0,a.useState)(!1),[c,u]=(0,a.useState)(""),[m,h]=(0,a.useState)(""),[x,p]=(0,a.useState)([{id:"root-prompt",type:"tag",tagName:"prompt",children:[]}]),[g,b]=(0,a.useState)("root-prompt"),N=e=>{h(e),setTimeout(()=>h(""),3e3)},k=e=>{let t=[],n=e=>{for(let r of e)t.push(r),r.children&&n(r.children)};return n(e),t},C=e=>{let t=k(x);if(0===t.length)return;let n=t.findIndex(e=>e.id===g);if("down"===e){let e=n<t.length-1?n+1:0;b(t[e].id)}else{let e=n>0?n-1:t.length-1;b(t[e].id)}},E=e=>{if(!g)return;let t=function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(let a=0;a<n.length;a++){if(n[a].id===g){if("up"===e&&a>0){let e=[...n];return[e[a-1],e[a]]=[e[a],e[a-1]],e}if("down"===e&&a<n.length-1){let e=[...n];return[e[a],e[a+1]]=[e[a+1],e[a]],e}break}if(n[a].children&&n[a].children.length>0){let e=t(n[a].children,[...r,n[a]]);if(e!==n[a].children){let t=[...n];return t[a]={...n[a],children:e},t}}}return n};p(t(x))},D=e=>{if(!g)return;let t=function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;for(let a=0;a<e.length;a++){if(e[a].id===n)return{parent:r,index:a,siblings:e};if(e[a].children){let r=t(e[a].children,n,e[a]);if(r)return r}}return null},n=t(x,g);if(!n)return;let{parent:r,index:a,siblings:s}=n;if("indent"===e){if(0===a)return;let e=s[a-1];if("tag"!==e.type)return;if(e.content&&""!==e.content.trim())return void N("Cannot indent into a tag that already contains text");let t=s[a];if(!r){let n=[...x];n.splice(a,1);let r=n.findIndex(t=>t.id===e.id);n[r]={...n[r],children:[...n[r].children||[],t]},p(n);return}let n=r=>r.map(r=>r.id===e.id?{...r,children:[...r.children||[],t]}:r.children?r.children.some(e=>e.id===g)?{...r,children:r.children.filter(e=>e.id!==g).map(e=>n([e])[0])}:{...r,children:n(r.children)}:r);p(n(x))}else{if(!r)return;let e=s[a],n=t(x,r.id);if(!n)return;let{parent:l,index:i,siblings:o}=n;if(!l)return void N("Cannot create multiple root tags");let d=t=>t.map(t=>{if(t.id===r.id)return{...t,children:t.children.filter(e=>e.id!==g)};if(t.children){if(t.children.some(e=>e.id===r.id)){let n=[...t.children],a=n.findIndex(e=>e.id===r.id);return n.splice(a+1,0,e),{...t,children:n.map(e=>e.id===r.id?{...e,children:e.children.filter(e=>e.id!==g)}:e)}}return{...t,children:d(t.children)}}return t});p(d(x))}};!function(e){let{onOpenTagDialog:t,onNavigateUp:n,onNavigateDown:r,onDelete:s,onEdit:l,onMoveUp:i,onMoveDown:o,onIndent:d,onUnindent:c,onOpenHelp:u}=e;(0,a.useEffect)(()=>((0,z.A)("c",e=>{e.preventDefault(),t()}),(0,z.A)("e",e=>{e.preventDefault(),l()}),(0,z.A)("up",e=>{e.preventDefault(),n()}),(0,z.A)("down",e=>{e.preventDefault(),r()}),(0,z.A)("alt+up",e=>{e.preventDefault(),i()}),(0,z.A)("alt+down",e=>{e.preventDefault(),o()}),(0,z.A)("tab",e=>{e.preventDefault(),d()}),(0,z.A)("shift+tab",e=>{e.preventDefault(),c()}),(0,z.A)("del, delete",e=>{e.preventDefault(),s()}),(0,z.A)("h",e=>{e.preventDefault(),u()}),()=>{z.A.unbind("c"),z.A.unbind("e"),z.A.unbind("up"),z.A.unbind("down"),z.A.unbind("alt+up"),z.A.unbind("alt+down"),z.A.unbind("tab"),z.A.unbind("shift+tab"),z.A.unbind("del, delete"),z.A.unbind("h")}),[t,n,r,s,l,i,o,d,c,u])}({onOpenTagDialog:()=>{if(g){let e=_();if((null==e?void 0:e.content)&&""!==e.content.trim())return void N("This tag already contains text")}t(!0)},onNavigateUp:()=>C("up"),onNavigateDown:()=>C("down"),onDelete:()=>O(),onEdit:()=>{g&&i(!0)},onMoveUp:()=>E("up"),onMoveDown:()=>E("down"),onIndent:()=>D("indent"),onUnindent:()=>D("unindent"),onOpenHelp:()=>d(!0)});let A=()=>"node-".concat(Date.now(),"-").concat(Math.random()),S=e=>{if(null===g)p([...x,e]);else{let t=k(x).find(e=>e.id===g);if((null==t?void 0:t.type)==="content")return void console.warn("Cannot add a child to a content node");let n=t=>t.map(t=>t.id===g?{...t,children:[...t.children||[],e]}:t.children?{...t,children:n(t.children)}:t);p(n(x))}},_=()=>g&&k(x).find(e=>e.id===g)||null,O=()=>{if(!g)return;let e=t=>t.filter(e=>e.id!==g).map(t=>t.children?{...t,children:e(t.children)}:t);p(e(x)),b(null)};return(0,r.jsxs)("div",{className:"h-screen flex flex-col",children:[(0,r.jsx)("header",{className:"border-b bg-background px-6 py-4",children:(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Interactive XML Prompt Builder"})}),(0,r.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,r.jsxs)("div",{className:"w-1/2 p-4 border-r overflow-auto",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"XML Structure"}),(0,r.jsx)(w,{nodes:x,selectedNodeId:g,onSelectNode:b})]}),(0,r.jsx)("div",{className:"w-1/2 p-4 overflow-hidden",children:(0,r.jsx)(T,{nodes:x})})]}),(0,r.jsx)("footer",{className:"border-t bg-background px-6 py-3 flex items-center justify-center text-sm text-muted-foreground",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:["Created by Cyrizon",(0,r.jsx)("a",{href:"https://github.com/cyrizon",target:"_blank",rel:"noopener noreferrer",className:"text-foreground hover:text-primary transition-colors",title:"View my GitHub",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z",clipRule:"evenodd"})})})]})}),(0,r.jsxs)("div",{className:"fixed bottom-20 left-1/2 transform -translate-x-1/2 bg-muted/80 backdrop-blur-sm px-4 py-2 rounded-full shadow-lg text-sm text-muted-foreground",children:["Press ",(0,r.jsx)("kbd",{className:"px-2 py-1 bg-accent rounded text-xs mx-1",children:"H"})," to show help"]}),m&&(0,r.jsx)("div",{className:"fixed bottom-20 left-1/2 transform -translate-x-1/2 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg animate-in fade-in slide-in-from-bottom-5 duration-300",children:m}),(0,r.jsx)(f,{open:e,onOpenChange:t,onInsertTag:e=>{u(e),t(!1),s(!0)}}),(0,r.jsx)(v,{open:n,onOpenChange:e=>{!e&&c&&(S({id:A(),type:"tag",tagName:c,children:[]}),u("")),s(e)},onInsertContent:e=>{S({id:A(),type:"tag",tagName:c,content:e.trim()?e.trim():void 0,children:[]}),u(""),s(!1)}}),(0,r.jsx)(j,{open:l,onOpenChange:i,node:_(),onSave:e=>{if("tag"===e.type&&e.content&&""!==e.content.trim()&&e.children&&e.children.length>0)return void N("This tag already contains child tags");let t=n=>n.map(n=>n.id===e.id?e:n.children?{...n,children:t(n.children)}:n);p(t(x))}}),(0,r.jsx)(y,{open:o,onOpenChange:d})]})}},6760:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(4209)}])}},e=>{e.O(0,[406,636,593,792],()=>e(e.s=6760)),_N_E=e.O()}]);